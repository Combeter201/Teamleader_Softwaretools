<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teamleader Softwaretools</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/manage.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='assets/favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap">
</head>
<body>
<header>
    <div class="left-container">
        <img src="{{ url_for('static', filename='assets/timer.png') }}" alt="Timer Icon" width="32" height="32">
        <a href="."><h1>Teamleader Softwaretools</h1></a>
    </div>
    <div class="right-container">
        {% if username %}
        <span class="username">Willkommen, {{ username }}</span>
        {% else %}
        <button type="button" class="login-button" onclick="login()">
            Anmelden
        </button>
        {% endif %}
    </div>
</header>
<div class="content">
    <div class="box-container">
        <div class="box">
            <div class="teamleader-users-container">
                <select id="teamSelect" class="teams" onchange="activateTeams()">
                    <option disabled selected hidden>Team auswählen</option>
                    <optgroup label="GF">
                        <option value="option1" id="a935254e-b5ce-0a6c-8558-916bd4f2bfba">René Ott</option>
                        <option value="option2" id="e0eda744-94d3-0803-9d5f-de2700b2bfb8">Daniel Rösch</option>
                    </optgroup>
                    <optgroup label="HR">
                        <option value="option3" id="a0c7fd5a-2276-0f1c-a651-3b7780633631">Anja Rausch</option>
                    </optgroup>
                    <optgroup label="Development">
                        <option value="option4" id="f49c6b93-b930-044d-be5d-2e9a7a22bfad">Fabian Hemberger</option>
                        <option value="option5" id="0ed1261b-cde1-07af-ba56-315561d3082d">Fabian Margraf</option>
                        <option value="option6" id="635876ac-a7f0-0e02-ad5d-0190f3f32f2e">Jörg Knaust</option>
                    </optgroup>
                    <optgroup label="Consulting">
                        <option value="option7" id="d1701b1c-0423-0f0a-8c5d-ff1c5a72bfaa">Fabian Ott</option>
                        <option value="option8" id="6ded28b1-8987-0e20-b655-668170f2bfb5">Jannis Schuhmann</option>
                        <option value="option9" id="c9e240c0-ba18-0c89-975c-5d9ce6b31eb0">Tobias Droglauer</option>
                        <option value="option10" id="7f88fa5f-e174-061f-9e54-8b4586234146">Reinhold Gieß</option>
                    </optgroup>
                    <optgroup label="AI">
                        <option value="option11" id="473c86b8-3929-027c-9853-5a26f84342f5">Tillmann Richl</option>
                    </optgroup>
                    <optgroup label="Accounting">
                        <option value="option12" id="fdc41e23-47c7-0195-855f-6ced66a34669">Valentin Böck</option>
                    </optgroup>
                    <optgroup label="Partner Management">
                        <option value="option13" id="523bb6f1-c8a3-0445-b85b-fcd63212d64a">Wolfgang Stifter</option>
                    </optgroup>
                </select>
                <input type="month" id="month" name="month" class="date-input" onchange="activateTeams()">
                <button type="button" class="confirm-button" id="confirmbutton" onclick="sendSelectedIdToPython()"
                        disabled>
                    Bestätigen
                </button>
                {% if members_info %}
                <button class="download-button" onclick="downloadCSV()">
                    <img src="{{ url_for('static', filename='assets/download.png') }}" alt="Upload Icon">
                </button>
                {% else %}
                <button class="download-button" disabled>
                    <img src="{{ url_for('static', filename='assets/download.png') }}" alt="Upload Icon">
                </button>
                {% endif %}

            </div>
        </div>
        <div id="box-content">
            {% if error_message %}
            <p class="error-message">{{ error_message }}</p>
            {% endif %}
            <table id="membersTable" class="{% if members_info %}visible{% else %}hidden{% endif %}">
                <thead>
                <tr>
                    <th>Vorname</th>
                    <th>Nachname</th>
                    <th>Erfasste Zeit</th>
                    <th>Abrechenbar</th>
                    <th>Nicht Abrechenbar</th>
                    <th>Arbeitstage</th>
                    <th>Fakuraquote</th>
                    <th>Überstunden</th>
                </tr>
                </thead>
                <tbody id="membersTableBody">
                {% for member in members_info %}
                <tr>
                    <td>{{ member.first_name }}</td>
                    <td>{{ member.last_name }}</td>
                    <td class="times">{{ member.total_duration }}</td>
                    <td class="times">{{ member.invoiceable_duration }}</td>
                    <td class="times">{{ member.non_invoiceable_duration }}</td>
                    <td class="times">{{ member.total_days }}</td>
                    <td class="times">{{ member.invoiceable_percentage }}</td>
                    <td class="times">{{ member.overtime_hours }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
<!-- Separate JavaScript file -->
<script src="{{ url_for('static', filename='js/manage.js') }}"></script>
<script src="{{ url_for('static', filename='js/login.js') }}"></script>
</body>
</html>
